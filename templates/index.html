<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Düğmeci Makina - Entegrasyon Paneli</title>

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#3b82f6">
    <link rel="manifest" href="/static/manifest.json">
    <link rel="apple-touch-icon" href="/static/icons/icon-192x192.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        :root {
            /* Ana Renkler */
            --main-bg: #f1f5f9; 
            --card-bg: #fff; 
            --text-dark: #0f172a; 
            --text-light: #64748b;
            --primary-color: #3b82f6; 
            --border-color: #e2e8f0; 
            --card-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            
            /* Modül Renkleri */
            --production-color: #ef4444; --stock-color: #22c55e; --sales-color: #eab308;
            --finance-color: #3b82f6; --recipe-color: #9333ea; --personel-color: #c084fc;
            --rapor-color: #6d28d9; --customer-color: #f97316; --settings-color: #64748b;
            --pdks-color: #14b8a6; --vardiya-color: #f43f5e; --maas-color: #84cc16;
            --quality-color: #16a34a; --energy-color: #ff9900; --crm-color: #94a3b8;
            --usd-color: #22c55e; --eur-color: #eab308;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: var(--main-bg); color: var(--text-dark); }
        .dashboard-container { display: flex; flex-direction: column; min-height: 100vh; }

        /* Üst Menü */
        .top-nav {
            background-color: var(--card-bg); padding: 0 2rem; height: 70px;
            box-shadow: var(--card-shadow); display: flex; align-items: center;
            justify-content: space-between; position: sticky; top: 0;
            width: 100%; box-sizing: border-box; z-index: 1000;
        }
        .logo { font-size: 1.5rem; font-weight: 700; color: var(--text-dark); text-decoration: none; }
        .nav-right { display: flex; align-items: center; gap: 1.5rem; }
        .date-info { font-size: 0.9rem; font-weight: 500; color: var(--text-dark); }
        .currency-rates {
            display: flex; gap: 1rem; font-weight: 600; font-size: 0.9rem;
            background-color: #f8fafc; padding: 0.5rem 1rem; border-radius: 0.5rem;
            border: 1px solid var(--border-color);
        }
        .currency-rates .usd { color: var(--usd-color); }
        .currency-rates .eur { color: var(--eur-color); }

        /* Ana İçerik */
        .content { flex: 1; padding: 2rem; }
        .page-header { margin-bottom: 2rem; }
        .page-header h1 { font-size: 2.25rem; font-weight: 700; margin: 0; }
        .page-header h2 { font-size: 1.5rem; font-weight: 600; margin: 2.5rem 0 1.5rem 0; color: var(--text-dark); }

        /* Özet Kartları */
        .summary-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1.5rem; }
        .summary-card { background-color: var(--card-bg); border-radius: 0.75rem; padding: 1.5rem; box-shadow: var(--card-shadow); display: flex; align-items: flex-start; border: 1px solid var(--border-color); }
        .summary-card .icon { font-size: 1.8rem; margin-right: 1rem; padding-top: 5px; }
        .summary-card-content h3 { font-size: 0.9rem; font-weight: 600; color: var(--text-light); margin: 0; }
        .summary-card-content .value { font-size: 2rem; font-weight: 700; color: var(--text-dark); margin-top: 0.5rem; }
        .summary-card.production .icon { color: var(--production-color); }
        .summary-card.stock .icon { color: var(--stock-color); }
        .summary-card.sales .icon { color: var(--sales-color); }
        .summary-card.finance .icon { color: var(--finance-color); }
        
        /* Menü Kutuları */
        .menu-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; }
        .menu-box { background-color: var(--card-bg); border-radius: 0.75rem; padding: 1.5rem; box-shadow: var(--card-shadow); display: flex; align-items: center; text-decoration: none; transition: transform 0.2s, box-shadow 0.2s; border: 1px solid var(--border-color); }
        .menu-box:hover { transform: translateY(-5px); box-shadow: 0 6px 12px rgba(0,0,0,0.08); border-color: var(--primary-color); }
        .menu-box .icon { font-size: 2.5rem; margin-right: 1.5rem; width: 48px; text-align: center; }
        .menu-box-content h2 { font-size: 1.1rem; margin: 0 0 0.25rem 0; color: var(--text-dark); font-weight: 600; }
        .menu-box-content p { font-size: 0.875rem; color: var(--text-light); margin: 0; }
        
        footer { padding: 2rem; text-align: center; color: var(--text-light); margin-top: auto; font-size: 0.9rem; }

        /* Mobil Uyum */
        @media (max-width: 768px) {
            .top-nav { flex-direction: column; height: auto; padding: 1rem; gap: 1rem; }
            .logo { font-size: 1.3rem; }
            .nav-right { width: 100%; justify-content: space-between; }
            .content { padding: 1rem; }
            .page-header h1 { font-size: 1.75rem; }
            .page-header h2 { font-size: 1.25rem; }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <nav class="top-nav">
            <a href="/" class="logo"><i class="fas fa-industry"></i> Düğmeci Makina</a>
            <div class="nav-right">
                <div class="currency-rates" id="currencyRates">
                    <span class="usd"><i class="fas fa-dollar-sign"></i> Yükleniyor...</span>
                    <span class="eur"><i class="fas fa-euro-sign"></i> Yükleniyor...</span>
                </div>
                <div class="date-info" id="currentDateTime"></div>
            </div>
        </nav>

        <main class="content" id="ana-icerik">
            <div class="page-header">
                <h1>Gösterge Paneli</h1>
            </div>

            <div class="summary-cards">
                <div class="summary-card production">
                    <i class="fas fa-cogs icon"></i>
                    <div class="summary-card-content">
                        <h3>Günlük Üretim</h3>
                        <div class="value">1,450</div>
                    </div>
                </div>
                <div class="summary-card stock">
                    <i class="fas fa-boxes-stacked icon"></i>
                    <div class="summary-card-content">
                        <h3>Stok Durumu</h3>
                        <div class="value">89%</div>
                    </div>
                </div>
                <div class="summary-card sales">
                    <i class="fas fa-truck icon"></i>
                    <div class="summary-card-content">
                        <h3>Bekleyen Sevkiyat</h3>
                        <div class="value">12</div>
                    </div>
                </div>
                <div class="summary-card finance">
                    <i class="fas fa-wallet icon"></i>
                    <div class="summary-card-content">
                        <h3>Kasa Bakiyesi</h3>
                        <div class="value">₺75,8K</div>
                    </div>
                </div>
            </div>

            <div class="page-header">
                <h2>Tüm Modüller</h2>
            </div>

            <div class="menu-grid">
                <a href="/uretim" class="menu-box">
                    <i class="fas fa-industry icon" style="color: var(--production-color);"></i>
                    <div class="menu-box-content">
                        <h2>Üretim Yönetimi</h2>
                        <p>Üretim emirleri, makine takibi ve verimlilik analizi.</p>
                    </div>
                </a>
                <a href="/stok" class="menu-box">
                    <i class="fas fa-warehouse icon" style="color: var(--stock-color);"></i>
                    <div class="menu-box-content">
                        <h2>Stok ve Depo</h2>
                        <p>Hammadde, yarı mamul ve ürün stok takibi.</p>
                    </div>
                </a>
                <a href="/gelen-faturalar" class="menu-box">
                    <i class="fas fa-file-invoice-dollar icon" style="color: var(--sales-color);"></i>
                    <div class="menu-box-content">
                        <h2>Gelen Faturalar</h2>
                        <p>Alış faturalarını yönetin ve takip edin.</p>
                    </div>
                </a>
                <a href="/gelir-gider" class="menu-box">
                    <i class="fas fa-chart-pie icon" style="color: var(--finance-color);"></i>
                    <div class="menu-box-content">
                        <h2>Gelir - Gider</h2>
                        <p>Genel gelir ve giderlerinizi kaydedin.</p>
                    </div>
                </a>
                 <a href="/hesap-makinasi" class="menu-box">
                    <i class="fas fa-calculator icon" style="color: var(--recipe-color);"></i>
                    <div class="menu-box-content">
                        <h2>Hammadde Hesaplayıcı</h2>
                        <p>Üretim için hammadde ihtiyaçlarını hesaplayın.</p>
                    </div>
                </a>
                <a href="/enerji" class="menu-box">
                    <i class="fas fa-bolt icon" style="color: var(--energy-color);"></i>
                    <div class="menu-box-content">
                        <h2>Enerji Yönetimi</h2>
                        <p>Enerji tüketim verilerinizi analiz edin.</p>
                    </div>
                </a>
                <a href="/kalite-kontrol" class="menu-box">
                    <i class="fas fa-check-double icon" style="color: var(--quality-color);"></i>
                    <div class="menu-box-content">
                        <h2>Kalite Kontrol</h2>
                        <p>Ürün kalite standartları ve kontrol süreçleri.</p>
                    </div>
                </a>
                <a href="/ayarlar" class="menu-box">
                    <i class="fas fa-cog icon" style="color: var(--settings-color);"></i>
                    <div class="menu-box-content">
                        <h2>Ayarlar</h2>
                        <p>Sistem ve kullanıcı ayarlarını yönetin.</p>
                    </div>
                </a>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 Düğmeci Makina. Tüm Hakları Saklıdır.</p>
        </footer>
    </div>
    
    <script>
        // Service Worker kaydı
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', () => {
            navigator.serviceWorker.register('/static/sw.js').then(registration => {
              console.log('Service Worker başarıyla kaydedildi:', registration.scope);
            }).catch(error => {
              console.log('Service Worker kaydı başarısız:', error);
            });
          });
        }
        
        // Bu kısım, sizin app.js dosyanızda daha gelişmiş olarak bulunabilir.
        // Bu, sadece anlık bilgilerin güncellenmesi için bir örnektir.
        document.addEventListener('DOMContentLoaded', () => {
            // Tarih ve Saati Güncelle
            const dateTimeElement = document.getElementById('currentDateTime');
            function updateDateTime() {
                const now = new Date();
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
                dateTimeElement.textContent = now.toLocaleDateString('tr-TR', options);
            }
            updateDateTime();
            setInterval(updateDateTime, 60000); // Her dakika güncelle

            // Döviz Kurlarını Çek (Örnek API)
            const currencyElement = document.getElementById('currencyRates');
            async function fetchCurrencies() {
                try {
                    // Not: Bu API ücretsiz bir test API'sidir ve gerçek projelerde güvenilir bir servis kullanılmalıdır.
                    const response = await fetch('https://api.exchangerate-api.com/v4/latest/TRY');
                    const data = await response.json();
                    const usdRate = (1 / data.rates.USD).toFixed(2);
                    const eurRate = (1 / data.rates.EUR).toFixed(2);
                    currencyElement.innerHTML = `
                        <span class="usd"><i class="fas fa-dollar-sign"></i> ${usdRate}</span>
                        <span class="eur"><i class="fas fa-euro-sign"></i> ${eurRate}</span>
                    `;
                } catch (error) {
                    console.error('Döviz kuru alınamadı:', error);
                    currencyElement.innerHTML = '<span>Kurlar alınamadı.</span>';
                }
            }
            fetchCurrencies();
        });
    </script>
</body>
</html>